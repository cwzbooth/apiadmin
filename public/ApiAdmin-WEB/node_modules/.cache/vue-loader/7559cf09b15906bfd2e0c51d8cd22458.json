{"remainingRequest":"/www/wwwroot/apiadmin.fmoons.com/public/ApiAdmin-WEB/node_modules/vue-loader/lib/index.js??vue-loader-options!/www/wwwroot/apiadmin.fmoons.com/public/ApiAdmin-WEB/src/view/wiki/login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/www/wwwroot/apiadmin.fmoons.com/public/ApiAdmin-WEB/src/view/wiki/login.vue","mtime":1596016298727},{"path":"/www/wwwroot/apiadmin.fmoons.com/public/ApiAdmin-WEB/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/www/wwwroot/apiadmin.fmoons.com/public/ApiAdmin-WEB/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/www/wwwroot/apiadmin.fmoons.com/public/ApiAdmin-WEB/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { login } from '@/api/wiki'\nimport { setToken } from '@/libs/util'\n\nexport default {\n  data () {\n    return {\n      form: {\n        username: '',\n        password: ''\n      },\n      rules: {\n        username: [\n          { required: true, message: 'AppId不能为空', trigger: 'blur' }\n        ],\n        password: [\n          { required: true, message: 'AppSecret不能为空', trigger: 'blur' }\n        ]\n      },\n      loading: false\n    }\n  },\n  methods: {\n    handleSubmit () {\n      let vm = this\n      this.$refs['loginForm'].validate((valid) => {\n        if (valid) {\n          vm.loading = true\n          login(vm.form).then(response => {\n            vm.$Message.success(response.data.msg)\n            setToken(response.data.data.apiAuth)\n            sessionStorage.setItem('ApiAdmin_AppInfo', response.data.data.app_id)\n            vm.$router.push({\n              name: 'wiki_list'\n            })\n            vm.loading = false\n          }).catch(() => {\n            vm.loading = false\n          })\n        }\n      })\n    }\n  }\n}\n",null]}